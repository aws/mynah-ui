name: Publish BETA package to NPM
on:
  workflow_dispatch:
  push:
    tags: ['beta*.*']

permissions:
  id-token: write # Required for OIDC authentication with npm
  contents: read # Required for actions/checkout

jobs:
  build:
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v4
      - name: Debug GitHub context
        env:
          GITHUB_CONTEXT: ${{ toJSON(github) }}
        run: |
          echo "Full github.ref: ${{ github.ref }}"
          echo "Short ref name: ${{ github.ref_name }}"
          echo "Event name: ${{ github.event_name }}"
          echo "Full GitHub context:"
          echo "$GITHUB_CONTEXT"